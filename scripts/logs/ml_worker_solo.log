INFO:app.ml.config.persistent_registry:\U0001f504 Loading existing models on startup...
INFO:app.ml.config.persistent_registry:\U0001f4c2 Loaded 12 models from registry file
INFO:app.ml.config.persistent_registry:\U0001f4c2 Found 12 model files
INFO:app.ml.config.persistent_registry:\u2705 Startup complete: 12 models loaded
INFO:app.ml.config.persistent_registry:   From registry file: 12
INFO:app.ml.config.persistent_registry:   From file scanning: 0
INFO:app.ml.config.persistent_registry:\u2705 PersistentModelRegistry initialized with 12 models
INFO:app.ml.preprocessing.data_processor:Initialized CryptoPriceDataProcessor with standard scaling
INFO:app.ml.training.training_service:MLTrainingService initialized with existing components
INFO:app.ml.preprocessing.data_processor:Initialized CryptoPriceDataProcessor with standard scaling
INFO:app.ml.prediction.prediction_service:Redis connection established for prediction optimization
INFO:app.ml.prediction.prediction_service:Optimized prediction service initialized
 
 -------------- ml_worker@DESKTOP-M6P1TMF v5.3.4 (emerald-rush)
--- ***** ----- 
-- ******* ---- Windows-10-10.0.19045-SP0 2025-08-09 02:43:00
- *** --- * --- 
- ** ---------- [config]
- ** ---------- .> app:         crypto_predict:0x1b256134d10
- ** ---------- .> transport:   redis://127.0.0.1:6379/0
- ** ---------- .> results:     redis://127.0.0.1:6379/0
- *** --- * --- .> concurrency: 1 (solo)
-- ******* ---- .> task events: ON
--- ***** ----- 
 -------------- [queues]
                .> ml_prediction    exchange=ml_prediction(direct) key=ml_prediction
                .> ml_tasks         exchange=ml_tasks(direct) key=ml_tasks
                .> model_training   exchange=model_training(direct) key=model_training

[tasks]
  . app.tasks.celery_app.debug_task
  . app.tasks.celery_app.health_check
  . app.tasks.price_collector.cleanup_old_data
  . app.tasks.price_collector.discover_new_cryptocurrencies
  . app.tasks.price_collector.get_task_status
  . app.tasks.price_collector.sync_all_prices
  . app.tasks.price_collector.sync_historical_data
  . app.tasks.price_collector.sync_specific_cryptocurrency
  . ml_tasks.auto_train_models
  . ml_tasks.cleanup_old_predictions
  . ml_tasks.evaluate_model_performance
  . ml_tasks.generate_scheduled_predictions

[2025-08-09 02:43:08,227: INFO/MainProcess] Connected to redis://127.0.0.1:6379/0
[2025-08-09 02:43:08,478: INFO/MainProcess] mingle: searching for neighbors
[2025-08-09 02:43:10,449: INFO/MainProcess] mingle: sync with 2 nodes
[2025-08-09 02:43:10,449: INFO/MainProcess] mingle: sync complete
[2025-08-09 02:43:18,047: INFO/MainProcess] ml_worker@DESKTOP-M6P1TMF ready.
[2025-08-09 02:44:48,440: INFO/MainProcess] sync with notification_worker@DESKTOP-M6P1TMF
[2025-08-09 02:44:48,608: INFO/MainProcess] sync with general_worker@DESKTOP-M6P1TMF
[2025-08-09 03:02:12,536: INFO/MainProcess] Task ml_tasks.auto_train_models[97bbbfdc-b857-44e3-8ef3-ffac10659726] received
[2025-08-09 03:02:12,630: INFO/MainProcess] Starting auto train models task 97bbbfdc-b857-44e3-8ef3-ffac10659726
[2025-08-09 03:02:12,803: ERROR/MainProcess] Auto training task failed: 'CryptocurrencyRepository' object has no attribute 'get_active_cryptocurrencies'
[2025-08-09 03:02:13,259: CRITICAL/MainProcess] Unrecoverable error: ValueError('Exception information must include the exception type')
Traceback (most recent call last):
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 354, in exception_to_python
    exc_type = exc['exc_type']
               ~~~^^^^^^^^^^^^
KeyError: 'exc_type'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\app\trace.py", line 544, in trace_task
    task.backend.mark_as_done(
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 157, in mark_as_done
    self.store_result(task_id, result, state, request=request)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 526, in store_result
    self._store_result(task_id, result, state, traceback,
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 973, in _store_result
    current_meta = self._get_task_meta_for(task_id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 998, in _get_task_meta_for
    return self.decode_result(meta)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 425, in decode_result
    return self.meta_from_decoded(self.decode(payload))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 421, in meta_from_decoded
    meta['result'] = self.exception_to_python(meta['result'])
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 356, in exception_to_python
    raise ValueError("Exception information must include "
ValueError: Exception information must include the exception type

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 354, in exception_to_python
    exc_type = exc['exc_type']
               ~~~^^^^^^^^^^^^
KeyError: 'exc_type'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\worker\worker.py", line 202, in start
    self.blueprint.start(self)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\bootsteps.py", line 116, in start
    step.start(parent)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\bootsteps.py", line 365, in start
    return self.obj.start()
           ^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\worker\consumer\consumer.py", line 340, in start
    blueprint.start(self)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\bootsteps.py", line 116, in start
    step.start(parent)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\worker\consumer\consumer.py", line 742, in start
    c.loop(*c.loop_args())
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\worker\loops.py", line 130, in synloop
    connection.drain_events(timeout=2.0)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\connection.py", line 341, in drain_events
    return self.transport.drain_events(self.connection, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\transport\virtual\base.py", line 997, in drain_events
    get(self._deliver, timeout=timeout)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\transport\redis.py", line 588, in get
    ret = self.handle_event(fileno, event)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\transport\redis.py", line 570, in handle_event
    return self.on_readable(fileno), self
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\transport\redis.py", line 566, in on_readable
    chan.handlers[type]()
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\transport\redis.py", line 971, in _brpop_read
    self.connection._deliver(loads(bytes_to_str(item)), dest)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\transport\virtual\base.py", line 1017, in _deliver
    callback(message)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\transport\virtual\base.py", line 639, in _callback
    return callback(message)
           ^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\kombu\messaging.py", line 656, in _receive_callback
    return on_m(message) if on_m else self.receive(decoded, message)
           ^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\worker\consumer\consumer.py", line 684, in on_task_received
    strategy(
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\worker\strategy.py", line 207, in task_message_handler
    handle(req)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\worker\worker.py", line 225, in _process_task
    req.execute_using_pool(self.pool)
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\worker\request.py", line 754, in execute_using_pool
    result = apply_async(
             ^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\concurrency\base.py", line 153, in apply_async
    return self.on_apply(target, args, kwargs,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\concurrency\base.py", line 30, in apply_target
    ret = target(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\app\trace.py", line 675, in fast_trace_task
    R, I, T, Rstr = tasks[task].__trace__(
                    ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\app\trace.py", line 598, in trace_task
    I, _, _, _ = on_error(task_request, exc)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\app\trace.py", line 399, in on_error
    R = I.handle_error_state(
        ^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\app\trace.py", line 178, in handle_error_state
    return {
           ^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\app\trace.py", line 230, in handle_failure
    task.backend.mark_as_failure(
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 167, in mark_as_failure
    self.store_result(task_id, exc, state,
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 526, in store_result
    self._store_result(task_id, result, state, traceback,
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 973, in _store_result
    current_meta = self._get_task_meta_for(task_id)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 998, in _get_task_meta_for
    return self.decode_result(meta)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 425, in decode_result
    return self.meta_from_decoded(self.decode(payload))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 421, in meta_from_decoded
    meta['result'] = self.exception_to_python(meta['result'])
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\install\Projects\crypto_predict\backend\venv\Lib\site-packages\celery\backends\base.py", line 356, in exception_to_python
    raise ValueError("Exception information must include "
ValueError: Exception information must include the exception type
[2025-08-09 03:02:15,622: WARNING/MainProcess] Restoring 1 unacknowledged message(s)
